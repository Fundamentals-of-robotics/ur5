<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ur5: FoR Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ur5
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">FoR Project</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> A number of objects are stored without any specific order on a stand located within the workspace of a robotic manipulator.</p>
<p>The manipulator is an anthropomorphic arm, with a spherical wrist and a two-fingered gripper as end-effector.</p>
<p>The objects can belong to different classes but have a known geometry.</p>
<p>The objective of the project is to use the manipulator to pick the objects in sequence and to position them on a different stand according to a specified order.</p>
<p>A calibrated 3D sensor is used to locate the different objects and to detect their position in the initial stand.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
List of contents</h1>
<ul>
<li>Installation and Configuration</li>
<li>Start the simulation</li>
<li>Contributions</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Installation and Configuration</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Install the environment</h2>
<p>There are few possible ways to install the environment</p>
<p><a href="https://github.com/mfocchi/lab-docker">Docker</a></p>
<p><a href="https://github.com/mfocchi/locosim">Natively on Linux</a></p>
<p><a href="http://www.dropbox.com/sh/5trh0s5y1xzdjds/AACchznJb7606MbQKb6-fUiUa">Virtual Machine image</a></p>
<h2><a class="anchor" id="autotoc_md4"></a>
Repository</h2>
<p>Install the Eigen library: </p><div class="fragment"><div class="line">sudo apt install libeigen3-dev</div>
</div><!-- fragment --><p>Clone the repository inside the <b>row_ws/src</b> folder: </p><div class="fragment"><div class="line">cd ros_ws/src</div>
<div class="line">git clone https://github.com/Fundamentals-of-robotics/ur5.git</div>
</div><!-- fragment --><p>Inside <b>ros_ws</b> folder type: </p><div class="fragment"><div class="line">cd ..</div>
<div class="line">catkin_make install</div>
</div><!-- fragment --><p>And finally, in the <b>ros_ws</b> folder: </p><div class="fragment"><div class="line">source devel/setup.bash</div>
</div><!-- fragment --><p> This is to make sure that the env variables are updated. This command is needed to be done every time you open a <b>new terminal</b>.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
World files</h2>
<p>Copy the content of the <b>worlds</b> folder inside <b>ros_ws/src/locosim/ros_impedance_controller/worlds</b> (you should have already other world files in the same folder such as tavolo.world, tavolo_obstacles.world).</p>
<p>After that, compile as done before with:</p>
<div class="fragment"><div class="line">cd ros_ws</div>
<div class="line">catkin_make install</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
Blocks models</h2>
<p>If not already imported, copy the content of the <b>blocks</b> folder inside <b>ros_ws/src/locosim/ros_impedance_controller/worlds/models</b> (you should have already other models in the same folder such as tavolo, brick, wall).</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Model path</h3>
<p>It can be that the folder where you copied the files is not inside the gazebo model path. To make shure that you can use the new models, even if they are not in the gazebo path, you can edit <b>GAZEBO_MODEL_PATH</b> through the **~/.bashrc**: </p><div class="fragment"><div class="line">gedit ~/.bashrc</div>
</div><!-- fragment --><p>then you can add your model path with, you can add as much as paths as you want, you need to split them using ':' : </p><div class="fragment"><div class="line">export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:&lt;path to your model&gt;</div>
</div><!-- fragment --><p>to check if the new path has been added: </p><div class="fragment"><div class="line">echo $GAZEBO_MODEL_PATH</div>
</div><!-- fragment --><p> this will print all the path associated with the gazebo model path.</p>
<p>After that, compile as done before with:</p>
<div class="fragment"><div class="line">cd ros_ws</div>
<div class="line">catkin_make install</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Vision setup</h1>
<p>Now you need to install the components to load and run the YOLOv5 model </p><div class="fragment"><div class="line">cd ~ros_ws/src/ur5/vision</div>
<div class="line">git clone https://github.com/ultralytics/yolov5.git</div>
<div class="line">cd yolov5</div>
<div class="line">pip3 install -r requirements.txt</div>
<div class="line">pip install torchvision</div>
</div><!-- fragment --><p> After that, compile as done before with: </p><div class="fragment"><div class="line">cd ros_ws</div>
<div class="line">catkin_make install</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Configuration</h2>
<p>In order to be able to grab all the blocks you should change the maximum gripper aperture value inside: <b>ros_ws/src/locosim/robot_descriptions/gripper_description/gripper_description/urdf/soft_finger.xacro</b> we change the <b>line 25</b> of this file to:</p>
<div class="fragment"><div class="line">&lt;limit effort=&quot;50&quot; velocity=&quot;10.0&quot; lower=&quot;-0.5&quot; upper=&quot;0.90&quot; /&gt;</div>
</div><!-- fragment --><p>If not already done, you should set <b>gripper_sim</b>, inside <b>ros_ws/src/locosim/robot_control/base_controllers/params.py</b> at <b>line 45</b>, to <b>True</b>. This will cause the gripper to be considered as a movable body rather than a rigid one.</p>
<div class="fragment"><div class="line"><span class="stringliteral">&#39;gripper_sim&#39;</span>: <span class="keyword">True</span>, <span class="comment"># False: the gripper is treated as a Rigid Body</span></div>
</div><!-- fragment --><p>To select a specfic <b>world file</b>, so that different blocks will spawn on the table, rewrite the <b>line 71</b> of the file <b>ros_ws/src/locosim/robot_control/base_controllers/ur5_generic.py</b> as</p>
<div class="fragment"><div class="line">self.world_name = &lt;name_of_the_world_file&gt;.world</div>
<div class="line"> </div>
<div class="line"><span class="comment">#for example</span></div>
<div class="line">self.world_name = tavolo_blocks_1.world</div>
</div><!-- fragment --><p> At the end, go to the directory ros_ws and use the following commands:</p>
<div class="fragment"><div class="line">catkin_make install</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Start the simulation</h1>
<p>To start the simulation, navigate to <b>ros_ws/src/locosim/robot_control/base_controllers</b> folder. Once done type: </p><div class="fragment"><div class="line">python3 ur5_generic.py</div>
</div><!-- fragment --><p> This will start a Gazebo and a rViz window.</p>
<p>After the homing procedure has finished (you can see it printed on the terminal), navigate using a new terminal, to <b>ros_ws</b> folder and type: </p><div class="fragment"><div class="line">roslaunch ur5 ur5.launch</div>
</div><!-- fragment --><p> This command will launch automatically all the nodes (vision, task and motion).</p>
<p>In the terminal, a series of debugging information will be printed to keep track of the actual state of the manipulator.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Contributions</h1>
<p>Pier Guido Seno [227485] <a href="#" onclick="location.href='mai'+'lto:'+'pie'+'rg'+'uid'+'o.'+'sen'+'o@'+'stu'+'de'+'nti'+'.u'+'nit'+'n.'+'it'; return false;">pierg<span class="obfuscator">.nosp@m.</span>uido<span class="obfuscator">.nosp@m.</span>.seno<span class="obfuscator">.nosp@m.</span>@stu<span class="obfuscator">.nosp@m.</span>denti<span class="obfuscator">.nosp@m.</span>.uni<span class="obfuscator">.nosp@m.</span>tn.it</a></p>
<p>Pietro Giannini [202099] <a href="#" onclick="location.href='mai'+'lto:'+'pie'+'tr'+'o.g'+'ia'+'nni'+'ni'+'@st'+'ud'+'ent'+'i.'+'uni'+'tn'+'.it'; return false;">pietr<span class="obfuscator">.nosp@m.</span>o.gi<span class="obfuscator">.nosp@m.</span>annin<span class="obfuscator">.nosp@m.</span>i@st<span class="obfuscator">.nosp@m.</span>udent<span class="obfuscator">.nosp@m.</span>i.un<span class="obfuscator">.nosp@m.</span>itn.i<span class="obfuscator">.nosp@m.</span>t</a></p>
<p>Stefano Camposilvan [226697] <a href="#" onclick="location.href='mai'+'lto:'+'ste'+'fa'+'no.'+'ca'+'mpo'+'si'+'lva'+'n@'+'stu'+'de'+'nti'+'.u'+'nit'+'n.'+'it'; return false;">stefa<span class="obfuscator">.nosp@m.</span>no.c<span class="obfuscator">.nosp@m.</span>ampos<span class="obfuscator">.nosp@m.</span>ilva<span class="obfuscator">.nosp@m.</span>n@stu<span class="obfuscator">.nosp@m.</span>dent<span class="obfuscator">.nosp@m.</span>i.uni<span class="obfuscator">.nosp@m.</span>tn.i<span class="obfuscator">.nosp@m.</span>t</a></p>
<p>Dorijan Di Zepp [226865] - <a href="#" onclick="location.href='mai'+'lto:'+'dor'+'ij'+'an.'+'di'+'zep'+'p@'+'stu'+'de'+'nti'+'.u'+'nit'+'n.'+'it'; return false;">dorij<span class="obfuscator">.nosp@m.</span>an.d<span class="obfuscator">.nosp@m.</span>izepp<span class="obfuscator">.nosp@m.</span>@stu<span class="obfuscator">.nosp@m.</span>denti<span class="obfuscator">.nosp@m.</span>.uni<span class="obfuscator">.nosp@m.</span>tn.it</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
